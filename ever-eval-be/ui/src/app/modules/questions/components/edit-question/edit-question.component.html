<div class="modal fade" id="editQuestion" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="color-line"></div>

            <div class="modal-header text-center">
                <h4 class="modal-title">Edit question</h4>
            </div>

            <div class="modal-body">
                <div class="form-horizontal">
                    <form [formGroup]="editQuestionReactiveForm" (ngSubmit)="editQuestion(editQuestionReactiveForm.value)" >
                        <input type="hidden" formControlName="id">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Content</label>

                            <div class="col-sm-10">
                                <input type="text" placeholder="Content" formControlName="content" name="content"
                                    class="form-control {{ !editQuestionReactiveForm.controls.content.valid && editQuestionReactiveForm.controls.content.touched ? 'error' : '' }}" />
                                <div *ngIf="editQuestionReactiveForm.controls.content.errors?.required && editQuestionReactiveForm.controls.content.touched">
                                    <label class="error">Faild required!</label>
                                </div>
                                <div *ngIf="editQuestionReactiveForm.controls.content.errors?.minlength && editQuestionReactiveForm.controls.content.touched">
                                    <label class="error">Content must be at least 3 characters long!</label>
                                </div>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label">Countdown</label>

                            <div class="col-sm-10">
                                <input type="text" placeholder="Countdown" formControlName="countdown" name="countdown"
                                    class="form-control {{ !editQuestionReactiveForm.controls.countdown.valid && editQuestionReactiveForm.controls.countdown.touched ? 'error' : '' }}" />
                                <div *ngIf="editQuestionReactiveForm.controls.countdown.errors?.required && editQuestionReactiveForm.controls.countdown.touched">
                                    <label class="error">Faild required!</label>
                                </div>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label">Question score</label>

                            <div class="col-sm-10">
                                <input type="text" placeholder="Score" formControlName="score" name="score"
                                class="form-control {{ !editQuestionReactiveForm.controls.score.valid && editQuestionReactiveForm.controls.score.touched ? 'error' : '' }}" />
                                <div *ngIf="editQuestionReactiveForm.controls.score.errors?.required && editQuestionReactiveForm.controls.score.touched">
                                    <label class="error">Faild required!</label>
                                </div>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="level">Level</label>
                            <div class="col-sm-10">
                                <select name="level" placeholder="Level" formControlName="level"
                                    class="form-control {{ !editQuestionReactiveForm.controls.level.valid && editQuestionReactiveForm.controls.level.touched ? 'error' : '' }}" >

                                    <option disabled selected>Select your level</option>
                                    <option>CD</option>
                                    <option>CJ</option>
                                    <option>CSD</option>
                                    <option>CLD</option>
                                </select>
                                <div *ngIf="editQuestionReactiveForm.controls.level.errors?.required && editQuestionReactiveForm.controls.level.touched">
                                    <label class="error">Faild required!</label>
                                </div>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="techno">Technologie</label>
                            <div class="col-sm-10">
                                <select name="techno" placeholder="Technologie" formControlName="techno"
                                    class="form-control {{ !editQuestionReactiveForm.controls.techno.valid && editQuestionReactiveForm.controls.techno.touched ? 'error' : '' }}" >

                                    <option disabled selected>Select your technology</option>
                                    <option>JAVAEE</option>
                                    <option>SAP</option>
                                    <option>DOTNET</option>
                                </select>
                                <div *ngIf="editQuestionReactiveForm.controls.techno.errors?.required && editQuestionReactiveForm.controls.techno.touched">
                                    <label class="error">Faild required!</label>
                                </div>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="type">Type</label>
                            <div class="col-sm-10">
                                <select name="type" placeholder="Type" formControlName="type"
                                    class="form-control {{ !editQuestionReactiveForm.controls.type.valid && editQuestionReactiveForm.controls.type.touched ? 'error' : '' }}">

                                    <option disabled selected>Select your type</option>
                                    <option>RADIO</option>
                                    <option>CHECKBOX</option>
                                    <option>TEXTFIELD</option>
                                    <option>TEXTAREA</option>
                                </select>
                                <div *ngIf="editQuestionReactiveForm.controls.type.errors?.required && editQuestionReactiveForm.controls.type.touched">
                                    <label class="error">Faild required!</label>
                                </div>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>

                        <input type="submit" hidden (ngSubmit)="editQuestion(editQuestionReactiveForm.value)" [disabled]="!editQuestionReactiveForm.valid" />                        

                    </form>
                    <form>
                            <div *ngIf="editQuestionReactiveForm.controls.type.value === 'RADIO' || editQuestionReactiveForm.controls.type.value === 'CHECKBOX'">

                                <div class="m-t-md">
                                    <h4>Responses</h4>
                                </div>
    
                                <div class="hr-line-dashed"></div>

                                <!-- Responses -->
                                <div *ngFor="let pr of proposedResponses; let i=index;">
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Response {{i+1}}</label>
                                        <div class="col-sm-8">
                                            <input type="text" placeholder="Content" (focusout)="updateField($event, i)" id="content" value="{{pr.content}}"
                                                name="content" class="form-control"
                                            />
                                        </div>
                                    </div>
                                    
                                    <div class="hr-line-dashed"></div>
                                    
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">State</label>
                                        <div class="col-sm-8">
                                            <input type="text" placeholder="State" (focusout)="updateField($event, i)" id="state" value="{{pr.state}}"
                                                name="state" class="form-control"
                                            />
                                        </div>
                                    </div>

                                    <div class="hr-line-dashed"></div>

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Score</label>
                                        <div class="col-sm-8">
                                            <input type="text" placeholder="Score" (focusout)="updateField($event, i)" id="score" value="{{pr.score}}"
                                                name="score" class="form-control"
                                            />
                                        </div>
                                    </div>

                                    <div class="text-right">
                                        <button class="btn btn-danger btn-sm" type="button" (click)="deleteProposedResponses(i)">
                                            <i class="fa fa-trash"></i> Delete
                                        </button>
                                    </div>

                                    <div class="hr-line-dashed"></div>
                                    
                                </div>
                                <!-- End of Responses -->
    
                                <!-- Add new proposed response section -->
                                <div>
                                    <form [formGroup]="addProposedResponseReactiveForm" (ngSubmit)="addProposedResponseQuestion(addProposedResponseReactiveForm.value)">
                                        
                                        <div class="hr-line-dashed"></div>
                                        
                                        <div class="m-t-md">
                                            <h4>Add new response</h4>
                                        </div>
                                        
                                        <div class="hr-line-dashed"></div>
        
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Proposed Response</label>
                                            <div class="col-sm-10">
                                                <input type="text" placeholder="Content" name="content" id="content" formControlName="content"
                                                    class="form-control {{ !addProposedResponseReactiveForm.controls.content.valid && addProposedResponseReactiveForm.controls.content.touched ? 'error' : '' }}" />

                                                <div *ngIf="addProposedResponseReactiveForm.controls.content.errors?.required && addProposedResponseReactiveForm.controls.content.touched">
                                                    <label class="error">Faild required!</label>
                                                </div>
                                                <div *ngIf="addProposedResponseReactiveForm.controls.content.errors?.minlength && addProposedResponseReactiveForm.controls.content.touched">
                                                    <label class="error">Content must be at least 3 characters long!</label>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="hr-line-dashed"></div>
                                        
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">State</label>
                                            <div class="col-sm-10">
                                                <input type="text" placeholder="State" name="state"
                                                    class="form-control {{ !addProposedResponseReactiveForm.controls.state.valid && addProposedResponseReactiveForm.controls.state.touched ? 'error' : '' }}"
                                                    id="state" formControlName="state"
                                                />
                                                <div *ngIf="addProposedResponseReactiveForm.controls.state.errors?.required && addProposedResponseReactiveForm.controls.state.touched">
                                                    <label class="error">Faild required!</label>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="hr-line-dashed"></div>
                                        
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Score</label>
                                            <div class="col-sm-10">
                                                <input type="text" placeholder="Score" name="score"
                                                    class="form-control {{ !addProposedResponseReactiveForm.controls.score.valid && addProposedResponseReactiveForm.controls.score.touched ? 'error' : '' }}"
                                                    id="score" formControlName="score"
                                                />
                                                <div *ngIf="addProposedResponseReactiveForm.controls.score.errors?.required && addProposedResponseReactiveForm.controls.score.touched">
                                                    <label class="error">Faild required!</label>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="hr-line-dashed"></div>
                                        
                                        <button class="btn btn-primary" type="submit" [disabled]="!addProposedResponseReactiveForm.valid">Add</button>

                                        <div class="hr-line-dashed"></div>
                                    </form>
                                </div>
                                <!-- End of Add new proposed response section -->
    
                            </div>
                        </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" id="editQst">Close</button>
                <button type="button" class="btn btn-primary" (click)="editQuestion(editQuestionReactiveForm.value)" [disabled]="!editQuestionReactiveForm.valid">
                    <swal #editSwal title="Done" text="The question has been edited" type="success"></swal>
                    Save
                </button>
            </div>
        </div>
    </div>
</div>