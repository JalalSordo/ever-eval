<div id="wrapper">
  <div class="normalheader transition animated fadeIn small-header">
    <div class="hpanel">
      <div class="panel-body">
        <h2 class="font-light m-b-xs">
          Candidates
        </h2>
        <small>Candidates list.</small>
      </div>
    </div>
    <div class="content animate-panel">
      <div class="row">
        <div class="col-lg-12">
          <div class="hpanel">
            <div class="panel-heading" style="margin-bottom: 10px;">
              Candidates list
            </div>
            <div class="panel-body">
              <div class="row pull-right" style="margin-bottom: 10px;">
                <div class="col-md-4">
                  <div id="nestable-menu">
                    <table>
                      <td class="inline">
                        <button class="btn btn-success " data-toggle="modal" data-target="#addCandidate" type="button"
                          style="margin-right: 5px;">
                          <i class="fa fa-plus"></i> Add
                        </button>
                      </td>
                      <td class="inline">
                        <button class="btn btn-xm btn-info " type="button" data-toggle="modal"
                          data-target="#convokeModal" (click)="showModal()">
                          <!-- (click)="quizForAllCandidate()"> style="margin-bottom: 10px;margin-left:40%" style="margin-left: 50px;"-->
                          <swal #convokeSuccessSwalAll title="Done"
                            text="An email has been sent to candidates containing their quiz" type="success"></swal>
                          <swal #convokeFailSwalAll title="Error" text="All the candidates has already been convoked"
                            type="warning">
                          </swal>
                          <i class="fa fa-share" aria-hidden="true"></i> Convoke All
                        </button>
                      </td>
                    </table>

                  </div>
                </div>
              </div>

              <table id="example2" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger"
                class="table table-condensed table-hover" cellspacing="1" cellpadding="1">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Level</th>
                    <th>Technology</th>
                    <th class="fit"></th>
                    <th class="fit"></th>
                    <th class="fit"></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let candidate of candidatesCheckList">
                    <td>
                      {{ candidate.name }}
                    </td>
                    <td>
                      {{ candidate.mail }}
                    </td>
                    <td>
                      <strong>{{ candidate.level }}</strong>
                    </td>
                    <td>{{ candidate.techno }}</td>
                    <td class="fit">
                      <button class="btn btn-info btn-xm" type="button" data-toggle="modal" data-target="#editModal"
                        (click)="open(candidate)">
                        <i class="fa fa-pencil"></i> Edit
                      </button>
                    </td>
                    <td class="fit">
                      <button class="btn btn-danger btn-xm" type="button" [swal]="deleteSwal">
                        <swal #deleteSwal title="Delete?" text="This cannot be undone" confirmButtonColor="#DD6B55"
                          confirmButtonText="Yes, delete" cancelButtonText="No, cancel" type="warning"
                          [showCancelButton]="true" [focusCancel]="true" (confirm)="deleteCandidate(candidate)">
                        </swal>
                        <swal #deletedSwal title="Deleted" text="Candidate has been deleted" type="success">
                        </swal>
                        <i class="fa fa-trash"></i> Delete
                      </button>
                    </td>
                    <td class="fit">
                      <button class="btn btn-xm btn-success" type="button" data-toggle="modal"
                        data-target="#convokeModal" (click)="[open(candidate),showModal()]" [disabled]="candidate.quiz">
                        <swal #convokeSuccessSwal title="Done"
                          text="An email has been sent to candidate containing their quiz" type="success">
                        </swal>
                        <swal #convokeFailSwal title="Error" text="This candidate has already been convoked"
                          type="warning"></swal>
                        <i class="fa fa-share" aria-hidden="true"></i> Convoke
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>
        </div>

        <footer class="footer">
          <span class="pull-right">
            EverEval
          </span>
          Everis 2019
        </footer>
      </div>
    </div>
    <app-add-candidate [candidatesList]="candidatesCheckList"></app-add-candidate>
    <app-edit-candidate [candidatesList]="candidatesCheckList" [selectedRow]="selectedRow"></app-edit-candidate>
    <app-number-question-quiz [selectedRow]="selectedRow" [candidatesList]="candidatesCheckList" [showedModal]="showedModal">
    </app-number-question-quiz>
  </div>